{"version":3,"file":"js/app.3434e6e2.js","mappings":"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","sources":["webpack://photo-grid-collage/./src/App.vue","webpack://photo-grid-collage/./src/GridCell.vue","webpack://photo-grid-collage/./src/GridCell.vue?f67a","webpack://photo-grid-collage/./src/App.vue?7ccd","webpack://photo-grid-collage/./src/main.js","webpack://photo-grid-collage/webpack/bootstrap","webpack://photo-grid-collage/webpack/runtime/chunk loaded","webpack://photo-grid-collage/webpack/runtime/compat get default export","webpack://photo-grid-collage/webpack/runtime/define property getters","webpack://photo-grid-collage/webpack/runtime/global","webpack://photo-grid-collage/webpack/runtime/hasOwnProperty shorthand","webpack://photo-grid-collage/webpack/runtime/node module decorator","webpack://photo-grid-collage/webpack/runtime/jsonp chunk loading","webpack://photo-grid-collage/webpack/startup"],"sourcesContent":["<!-- App.vue -->\n<template>\n  <div id=\"app\">\n    <h1>Photo Grid Collage</h1>\n    <div class=\"controls\">\n      <label for=\"grid-size\">选择网格大小：</label>\n      <select v-model=\"gridSize\" @change=\"generateGrid\">\n        <option v-for=\"n in 9\" :key=\"n + 1\" :value=\"n + 1\">\n          {{ n + 1 }} x {{ n + 1 }}\n        </option>\n      </select>\n\n      <input type=\"file\" multiple accept=\"image/*\" @change=\"handleFileUpload\" />\n\n      <button @click=\"exportImage\">导出为 JPEG</button>\n      <a v-if=\"exportedImage\" :href=\"exportedImage\" download=\"collage.jpg\"\n        >下载图片</a\n      >\n    </div>\n\n    <div class=\"grid-container\" :style=\"gridStyle\" ref=\"gridContainer\">\n      <GridCell\n        v-for=\"(cell, index) in gridCells\"\n        :key=\"cell.id\"\n        :image=\"cell.image\"\n        @updateImage=\"updateCellImage(index, $event)\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport GridCell from \"./GridCell.vue\";\nimport html2canvas from \"html2canvas\";\n\nexport default {\n  components: {\n    GridCell,\n  },\n  data() {\n    return {\n      gridSize: 2,\n      gridCells: [],\n      uploadedImages: [],\n      exportedImage: null,\n    };\n  },\n  computed: {\n    gridStyle() {\n      return {\n        \"grid-template-columns\": `repeat(${this.gridSize}, 1fr)`,\n      };\n    },\n  },\n  methods: {\n    generateGrid() {\n      const totalCells = this.gridSize * this.gridSize;\n      this.gridCells = Array.from({ length: totalCells }, (_, index) => ({\n        id: index,\n        image: null,\n      }));\n      // 重置已上传的图片\n      this.uploadedImages = [];\n      this.exportedImage = null;\n    },\n    handleFileUpload(event) {\n      const files = Array.from(event.target.files);\n      const totalCells = this.gridSize * this.gridSize;\n      const remainingSlots = totalCells - this.uploadedImages.length;\n      if (files.length > remainingSlots) {\n        alert(`您最多还能上传 ${remainingSlots} 张图片`);\n        return;\n      }\n      files.forEach((file) => {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          this.uploadedImages.push(e.target.result);\n          this.placeImageInGrid(e.target.result);\n        };\n        reader.readAsDataURL(file);\n      });\n      // 清空文件输入框的值\n      event.target.value = \"\";\n    },\n    placeImageInGrid(imageData) {\n      // 找到第一个没有图片的网格单元\n      for (let i = 0; i < this.gridCells.length; i++) {\n        if (!this.gridCells[i].image) {\n          this.gridCells[i].image = imageData;\n          break;\n        }\n      }\n    },\n    updateCellImage(index, imageData) {\n      this.$set(this.gridCells, index, {\n        ...this.gridCells[index],\n        image: imageData,\n      });\n    },\n    exportImage() {\n      html2canvas(this.$refs.gridContainer, { useCORS: true }).then(\n        (canvas) => {\n          this.exportedImage = canvas.toDataURL(\"image/jpeg\");\n        }\n      );\n    },\n  },\n  mounted() {\n    this.generateGrid();\n  },\n};\n</script>\n\n<style>\n#app {\n  font-family: Arial, sans-serif;\n  padding: 20px;\n}\n\n.controls {\n  margin-bottom: 20px;\n}\n\n.grid-container {\n  display: grid;\n  grid-gap: 5px;\n  margin: 10px;\n}\n\n.grid-cell {\n  width: 100%;\n  padding-bottom: 100%; /* 使单元格为正方形 */\n  position: relative;\n  overflow: hidden;\n  background-color: #f0f0f0;\n}\n\na {\n  margin-left: 10px;\n}\n</style>\n","<!-- GridCell.vue -->\n<template>\n  <div class=\"grid-cell\" ref=\"cell\">\n    <img\n      v-if=\"image\"\n      :src=\"image\"\n      class=\"draggable\"\n      ref=\"image\"\n      :style=\"imageStyle\"\n    />\n    <div v-else class=\"placeholder\">拖拽或点击添加图片</div>\n  </div>\n</template>\n\n<script>\nimport interact from \"interactjs\";\n\nexport default {\n  props: {\n    image: String,\n  },\n  emits: [\"updateImage\"],\n  data() {\n    return {\n      scale: 1,\n      position: { x: 0, y: 0 },\n      imageNaturalWidth: 0,\n      imageNaturalHeight: 0,\n      cellWidth: 0,\n      cellHeight: 0,\n      initialScale: 1,\n    };\n  },\n  computed: {\n    imageStyle() {\n      return {\n        transform: `translate(${this.position.x}px, ${this.position.y}px) scale(${this.scale})`,\n      };\n    },\n  },\n  mounted() {\n    if (this.image) {\n      this.$nextTick(() => {\n        this.initializeImage();\n      });\n      if (this.$refs.image) {\n        this.$refs.image.addEventListener(\"wheel\", this.onWheel);\n      }\n    }\n  },\n  beforeUnmount() {\n    if (this.$refs.image) {\n      this.$refs.image.removeEventListener(\"wheel\", this.onWheel);\n    }\n  },\n  watch: {\n    image(newVal) {\n      if (newVal) {\n        this.$nextTick(() => {\n          this.initializeImage();\n          if (this.$refs.image) {\n            this.$refs.image.addEventListener(\"wheel\", this.onWheel);\n          }\n        });\n      }\n    },\n  },\n  methods: {\n    initializeImage() {\n      this.position = { x: 0, y: 0 };\n      this.scale = 1;\n\n      const img = new Image();\n      img.onload = () => {\n        this.imageNaturalWidth = img.width;\n        this.imageNaturalHeight = img.height;\n\n        this.$nextTick(() => {\n          const cellRect = this.$refs.cell.getBoundingClientRect();\n          this.cellWidth = cellRect.width;\n          this.cellHeight = cellRect.height;\n\n          const widthScale = this.cellWidth / this.imageNaturalWidth;\n          const heightScale = this.cellHeight / this.imageNaturalHeight;\n          this.initialScale = Math.max(widthScale, heightScale);\n          this.scale = this.initialScale;\n\n          const adjustedWidth = this.imageNaturalWidth * this.initialScale;\n          const adjustedHeight = this.imageNaturalHeight * this.initialScale;\n          this.position.x = (this.cellWidth - adjustedWidth / this.scale) / 2;\n          this.position.y = (this.cellHeight - adjustedHeight / this.scale) / 2;\n\n          this.initInteract();\n        });\n      };\n      img.src = this.image;\n    },\n    initInteract() {\n      interact(this.$refs.image)\n        .draggable({\n          modifiers: [\n            interact.modifiers.restrictRect({\n              restriction: this.$refs.cell,\n              endOnly: true,\n            }),\n          ],\n          listeners: {\n            move: (event) => {\n              this.position.x += event.dx;\n              this.position.y += event.dy;\n\n              event.target.style.transform = `translate(${this.position.x}px, ${this.position.y}px) scale(${this.scale})`;\n            },\n          },\n        })\n        .gesturable({\n          listeners: {\n            move: (event) => {\n              this.scale *= 1 + event.ds;\n              this.scale = Math.max(\n                this.initialScale * 0.05,\n                Math.min(this.scale, this.initialScale * 10)\n              );\n\n              event.target.style.transform = `translate(${this.position.x}px, ${this.position.y}px) scale(${this.scale})`;\n            },\n          },\n        });\n    },\n    onWheel(event) {\n      event.preventDefault();\n\n      const delta = event.deltaY < 0 ? 0.05 : -0.05;\n      const scaleFactor = 1 + delta;\n      const newScale = this.scale * scaleFactor;\n\n      const minScale = this.initialScale * 0.5;\n      const maxScale = this.initialScale * 3;\n      this.scale = Math.max(minScale, Math.min(newScale, maxScale));\n\n      //   const rect = this.$refs.image.getBoundingClientRect();\n      //   const offsetX = event.clientX - rect.left;\n      //   const offsetY = event.clientY - rect.top;\n      //   console.log(offsetX, offsetY);\n\n      // 哼哼啊啊啊啊鼠标中心缩放写不出来！！！！\n      const aspectRatio = this.imageNaturalWidth / this.imageNaturalHeight;\n      const deltaX = delta; //* offsetX;\n      const deltaY = delta * aspectRatio; // * offsetY;\n\n      this.position.x -= deltaX;\n      this.position.y -= deltaY;\n\n      this.$refs.image.style.transform = `translate(${this.position.x}px, ${this.position.y}px) scale(${this.scale})`;\n    },\n  },\n};\n</script>\n\n<style>\n.grid-cell {\n  position: relative;\n  overflow: hidden;\n  background-color: #e0e0e0;\n}\n\n.draggable {\n  position: absolute;\n  left: 0;\n  top: 0;\n  touch-action: none;\n  user-select: none;\n  /* 确保图片尺寸由 transform 控制 */\n  max-width: none;\n  max-height: none;\n}\n\n.placeholder {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #999;\n  font-size: 14px;\n  cursor: pointer;\n}\n</style>\n","import { render } from \"./GridCell.vue?vue&type=template&id=0d62e20a\"\nimport script from \"./GridCell.vue?vue&type=script&lang=js\"\nexport * from \"./GridCell.vue?vue&type=script&lang=js\"\n\nimport \"./GridCell.vue?vue&type=style&index=0&id=0d62e20a&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=e1fdaa1c\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=e1fdaa1c&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// main.js\nimport { createApp } from \"vue\";\nimport App from \"./App.vue\";\n\ncreateApp(App).mount(\"#app\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkphoto_grid_collage\"] = self[\"webpackChunkphoto_grid_collage\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(5420); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","for","_cache","$event","$data","gridSize","onChange","args","$options","generateGrid","_Fragment","_renderList","n","key","value","_toDisplayString","_hoisted_3","type","multiple","accept","handleFileUpload","onClick","exportImage","exportedImage","href","download","_hoisted_4","_createCommentVNode","style","_normalizeStyle","gridStyle","ref","gridCells","cell","index","_createBlock","_component_GridCell","image","onUpdateImage","updateCellImage","$props","src","imageStyle","props","String","emits","data","scale","position","x","y","imageNaturalWidth","imageNaturalHeight","cellWidth","cellHeight","initialScale","computed","transform","this","mounted","$nextTick","initializeImage","$refs","addEventListener","onWheel","beforeUnmount","removeEventListener","watch","newVal","methods","img","Image","onload","width","height","cellRect","getBoundingClientRect","widthScale","heightScale","Math","max","adjustedWidth","adjustedHeight","initInteract","interact","draggable","modifiers","restrictRect","restriction","endOnly","listeners","move","event","dx","dy","target","gesturable","ds","min","preventDefault","delta","deltaY","scaleFactor","newScale","minScale","maxScale","aspectRatio","deltaX","__exports__","components","GridCell","uploadedImages","totalCells","Array","from","length","_","files","remainingSlots","alert","forEach","file","reader","FileReader","e","push","result","placeImageInGrid","readAsDataURL","imageData","i","$set","html2canvas","gridContainer","useCORS","then","canvas","toDataURL","render","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","loaded","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","splice","r","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","window","obj","prop","prototype","hasOwnProperty","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}