{"version":3,"file":"js/app.d8cd505c.js","mappings":"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","sources":["webpack://photo-grid-collage/./src/App.vue","webpack://photo-grid-collage/./src/GridCell.vue","webpack://photo-grid-collage/./src/GridCell.vue?f67a","webpack://photo-grid-collage/./src/App.vue?7ccd","webpack://photo-grid-collage/./src/main.js","webpack://photo-grid-collage/webpack/bootstrap","webpack://photo-grid-collage/webpack/runtime/chunk loaded","webpack://photo-grid-collage/webpack/runtime/compat get default export","webpack://photo-grid-collage/webpack/runtime/define property getters","webpack://photo-grid-collage/webpack/runtime/global","webpack://photo-grid-collage/webpack/runtime/hasOwnProperty shorthand","webpack://photo-grid-collage/webpack/runtime/node module decorator","webpack://photo-grid-collage/webpack/runtime/jsonp chunk loading","webpack://photo-grid-collage/webpack/startup"],"sourcesContent":["<!-- App.vue -->\n<template>\n  <div id=\"app\">\n    <h1>Photo Grid Collage: n宫格图片生成器</h1>\n    <div class=\"controls\">\n      <div class=\"control-item\">\n        <label for=\"grid-size\">选择网格大小：</label>\n        <select v-model=\"gridSize\" @change=\"generateGrid\">\n          <option v-for=\"n in 9\" :key=\"n + 1\" :value=\"n + 1\">\n            {{ n + 1 }} x {{ n + 1 }}\n          </option>\n        </select>\n      </div>\n      <div class=\"control-item\">\n        <label class=\"custom-file-upload\">\n          <input\n            type=\"file\"\n            multiple\n            accept=\"image/*\"\n            @change=\"handleFileUpload\"\n          />\n          上传图片\n        </label>\n      </div>\n      <div class=\"control-item\">\n        <label for=\"grid-gap-slider\">调整网格间距：{{ gridGap }}px</label>\n      </div>\n      <div class=\"control-item\" id=\"grid-gap-slider-container\">\n        <input\n          id=\"grid-gap-slider\"\n          type=\"range\"\n          min=\"0\"\n          max=\"20\"\n          v-model=\"gridGap\"\n        />\n      </div>\n      <div class=\"control-item export-button\">\n        <button @click=\"exportImage\">导出为 JPEG</button>\n        <button\n          class=\"download-button\"\n          v-if=\"exportedImage\"\n          :href=\"exportedImage\"\n          download=\"collage.jpg\"\n        >\n          下载图片\n        </button>\n      </div>\n    </div>\n\n    <div class=\"grid-container\" :style=\"gridStyle\" ref=\"gridContainer\">\n      <GridCell\n        v-for=\"(cell, index) in gridCells\"\n        :key=\"cell.id\"\n        :image=\"cell.image\"\n        @updateImage=\"updateCellImage(index, $event)\"\n      />\n    </div>\n    <div v-if=\"isLoading\" class=\"loading-overlay\">\n      <div class=\"spinner\"></div>\n    </div>\n\n    <footer>\n      <p>\n        © 2024~2025 spicyfish. All rights reserved.\n        所有图片均在本地处理，不会上传到服务器。\n      </p>\n    </footer>\n  </div>\n</template>\n\n<script>\nimport GridCell from \"./GridCell.vue\";\nimport html2canvas from \"html2canvas\";\n\nexport default {\n  components: {\n    GridCell,\n  },\n  data() {\n    return {\n      gridSize: 2,\n      gridGap: 0, // px\n      gridCells: [],\n      uploadedImages: [],\n      exportedImage: null,\n      isLoading: false,\n    };\n  },\n  computed: {\n    gridStyle() {\n      return {\n        \"grid-template-columns\": `repeat(${this.gridSize}, 1fr)`,\n        gap: `${this.gridGap}px`,\n      };\n    },\n  },\n  methods: {\n    generateGrid() {\n      const totalCells = this.gridSize * this.gridSize;\n      this.gridCells = Array.from({ length: totalCells }, (_, index) => ({\n        id: index,\n        image: null,\n      }));\n      // 重置已上传的图片\n      this.uploadedImages = [];\n      this.exportedImage = null;\n    },\n    handleFileUpload(event) {\n      const files = Array.from(event.target.files);\n      const totalCells = this.gridSize * this.gridSize;\n      const remainingSlots = totalCells - this.uploadedImages.length;\n      if (files.length > remainingSlots) {\n        alert(`您最多还能上传 ${remainingSlots} 张图片`);\n        return;\n      }\n      files.forEach((file) => {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          this.uploadedImages.push(e.target.result);\n          this.placeImageInGrid(e.target.result);\n        };\n        reader.readAsDataURL(file);\n      });\n      // 清空文件输入框的值\n      event.target.value = \"\";\n    },\n    placeImageInGrid(imageData) {\n      // 找到第一个没有图片的网格单元\n      for (let i = 0; i < this.gridCells.length; i++) {\n        if (!this.gridCells[i].image) {\n          this.gridCells[i].image = imageData;\n          break;\n        }\n      }\n    },\n    updateCellImage(index, imageData) {\n      this.$set(this.gridCells, index, {\n        ...this.gridCells[index],\n        image: imageData,\n      });\n    },\n    exportImage() {\n      this.isLoading = true; // 开始加载动画\n      html2canvas(this.$refs.gridContainer, {\n        useCORS: true,\n        scale: 3,\n      })\n        .then((canvas) => {\n          this.exportedImage = canvas.toDataURL(\"image/jpeg\");\n          this.isLoading = false; // 结束加载动画\n        })\n        .catch(() => {\n          this.isLoading = false; // 即使发生错误也要结束加载动画\n          alert(\"导出失败，请重试。\");\n        });\n    },\n  },\n  mounted() {\n    this.generateGrid();\n  },\n};\n</script>\n\n<style>\n#app {\n  font-family: Arial, sans-serif;\n  padding: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n  background-color: #fff;\n}\n\nh1 {\n  text-align: center;\n  color: #333;\n  font-size: 2em;\n  margin-bottom: 20px;\n}\n\n.controls {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: space-between;\n  gap: 15px;\n  margin-bottom: 20px;\n}\n\n.control-item {\n  display: flex;\n  align-items: center;\n}\n\n.control-item label {\n  margin-right: 5px;\n}\n\n.control-item select,\n.control-item input[type=\"range\"] {\n  padding: 5px;\n  font-size: 14px;\n}\n\n.export-button {\n  margin-left: auto;\n}\n\n.download-button {\n  margin-left: 10px;\n  background-color: #4caf50;\n  font-size: 14px;\n}\n\n.download-button:hover {\n  background-color: #45a049; \n}\n\n#grid-gap-slider-container {\n  margin-right: auto;\n  margin-left: 10px;\n}\n\nbutton {\n  padding: 6px 12px;\n  cursor: pointer;\n  background-color: #2196f3;\n  color: #fff;\n  border: 0px;\n  /* border: 2px solid #2196f3; */\n  border-radius: 4px;\n}\n\nbutton:hover {\n  background-color: #0b7dda;\n  /* border-color: #0b7dda; */\n}\n\na {\n  margin-left: 10px;\n  color: #4caf50;\n}\n\n.grid-container {\n  display: grid;\n  max-width: 1000px;\n  margin: 10px auto;\n}\n\n.grid-cell {\n  width: 100%;\n  padding-bottom: 100%; /* 使单元格为正方形 */\n  position: relative;\n  overflow: hidden;\n  background-color: #f0f0f0;\n}\n\n/* 自定义上传按钮 */\n.custom-file-upload {\n  display: inline-block;\n  padding: 6px 12px;\n  cursor: pointer;\n  background-color: #2196f3;\n  color: #fff;\n  border-radius: 4px;\n  font-size: 14px;\n}\n\n.custom-file-upload:hover {\n  background-color: #0b7dda;\n}\n\n.custom-file-upload input[type=\"file\"] {\n  display: none;\n}\n\n/* 加载动画样式 */\n.loading-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(255, 255, 255, 0.7);\n  z-index: 999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.spinner {\n  border: 8px solid #f3f3f3;\n  border-top: 8px solid #333;\n  border-radius: 50%;\n  width: 60px;\n  height: 60px;\n  animation: spin 1s linear infinite;\n}\n\nfooter {\n  margin-top: 20px;\n  text-align: center;\n  color: #666;\n  font-size: 14px;\n}\n\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n</style>\n","<!-- GridCell.vue -->\n<template>\n  <div class=\"grid-cell\" ref=\"cell\">\n    <img\n      v-if=\"image\"\n      :src=\"image\"\n      class=\"draggable\"\n      ref=\"image\"\n      :style=\"imageStyle\"\n    />\n    <div v-else class=\"placeholder\">请上传图片</div>\n  </div>\n</template>\n\n<script>\nimport interact from \"interactjs\";\n\nexport default {\n  props: {\n    image: String,\n  },\n  emits: [\"updateImage\"],\n  data() {\n    return {\n      scale: 1,\n      position: { x: 0, y: 0 },\n      imageNaturalWidth: 0,\n      imageNaturalHeight: 0,\n      cellWidth: 0,\n      cellHeight: 0,\n      initialScale: 1,\n    };\n  },\n  computed: {\n    imageStyle() {\n      return {\n        transform: `translate(${this.position.x}px, ${this.position.y}px) scale(${this.scale})`,\n      };\n    },\n  },\n  mounted() {\n    if (this.image) {\n      this.$nextTick(() => {\n        this.initializeImage();\n      });\n      if (this.$refs.image) {\n        this.$refs.image.addEventListener(\"wheel\", this.onWheel);\n      }\n    }\n  },\n  beforeUnmount() {\n    if (this.$refs.image) {\n      this.$refs.image.removeEventListener(\"wheel\", this.onWheel);\n    }\n  },\n  watch: {\n    image(newVal) {\n      if (newVal) {\n        this.$nextTick(() => {\n          this.initializeImage();\n          if (this.$refs.image) {\n            this.$refs.image.addEventListener(\"wheel\", this.onWheel);\n          }\n        });\n      }\n    },\n  },\n  methods: {\n    initializeImage() {\n      this.position = { x: 0, y: 0 };\n      this.scale = 1;\n\n      const img = new Image();\n      img.onload = () => {\n        this.imageNaturalWidth = img.width;\n        this.imageNaturalHeight = img.height;\n\n        this.$nextTick(() => {\n          const cellRect = this.$refs.cell.getBoundingClientRect();\n          this.cellWidth = cellRect.width;\n          this.cellHeight = cellRect.height;\n\n          const widthScale = this.cellWidth / this.imageNaturalWidth;\n          const heightScale = this.cellHeight / this.imageNaturalHeight;\n          this.initialScale = Math.max(widthScale, heightScale);\n          this.scale = this.initialScale;\n\n          const adjustedWidth = this.imageNaturalWidth * this.initialScale;\n          const adjustedHeight = this.imageNaturalHeight * this.initialScale;\n          this.position.x = (this.cellWidth - adjustedWidth / this.scale) / 2;\n          this.position.y = (this.cellHeight - adjustedHeight / this.scale) / 2;\n\n          this.initInteract();\n        });\n      };\n      img.src = this.image;\n    },\n    initInteract() {\n      interact(this.$refs.image)\n        .draggable({\n          modifiers: [\n            interact.modifiers.restrictRect({\n              restriction: this.$refs.cell,\n              endOnly: true,\n            }),\n          ],\n          listeners: {\n            move: (event) => {\n              this.position.x += event.dx;\n              this.position.y += event.dy;\n\n              event.target.style.transform = `translate(${this.position.x}px, ${this.position.y}px) scale(${this.scale})`;\n            },\n          },\n        })\n        .gesturable({\n          listeners: {\n            move: (event) => {\n              this.scale *= 1 + event.ds;\n              this.scale = Math.max(\n                this.initialScale * 0.05,\n                Math.min(this.scale, this.initialScale * 10)\n              );\n\n              event.target.style.transform = `translate(${this.position.x}px, ${this.position.y}px) scale(${this.scale})`;\n            },\n          },\n        });\n    },\n    onWheel(event) {\n      event.preventDefault();\n\n      const delta = event.deltaY < 0 ? 0.05 : -0.05;\n      const scaleFactor = 1 + delta;\n      const newScale = this.scale * scaleFactor;\n\n      const minScale = this.initialScale * 0.5;\n      const maxScale = this.initialScale * 3;\n      this.scale = Math.max(minScale, Math.min(newScale, maxScale));\n\n      //   const rect = this.$refs.image.getBoundingClientRect();\n      //   const offsetX = event.clientX - rect.left;\n      //   const offsetY = event.clientY - rect.top;\n      //   console.log(offsetX, offsetY);\n\n      // 哼哼啊啊啊啊鼠标中心缩放写不出来！！！！\n      const aspectRatio = this.imageNaturalWidth / this.imageNaturalHeight;\n      const deltaX = delta; //* offsetX;\n      const deltaY = delta * aspectRatio; // * offsetY;\n\n      this.position.x -= deltaX;\n      this.position.y -= deltaY;\n\n      this.$refs.image.style.transform = `translate(${this.position.x}px, ${this.position.y}px) scale(${this.scale})`;\n    },\n  },\n};\n</script>\n\n<style>\n.grid-cell {\n  position: relative;\n  overflow: hidden;\n  background-color: #e0e0e0;\n}\n\n.draggable {\n  position: absolute;\n  left: 0;\n  top: 0;\n  touch-action: none;\n  user-select: none;\n  /* 确保图片尺寸由 transform 控制 */\n  max-width: none;\n  max-height: none;\n}\n\n.placeholder {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #999;\n  font-size: 14px;\n  cursor: pointer;\n}\n</style>\n","import { render } from \"./GridCell.vue?vue&type=template&id=2ff5e692\"\nimport script from \"./GridCell.vue?vue&type=script&lang=js\"\nexport * from \"./GridCell.vue?vue&type=script&lang=js\"\n\nimport \"./GridCell.vue?vue&type=style&index=0&id=2ff5e692&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=6ba8740d\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=6ba8740d&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// main.js\nimport { createApp } from \"vue\";\nimport App from \"./App.vue\";\n\ncreateApp(App).mount(\"#app\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkphoto_grid_collage\"] = self[\"webpackChunkphoto_grid_collage\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(242); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","class","for","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_cache","$event","$data","gridSize","onChange","args","$options","generateGrid","_Fragment","_renderList","n","value","_toDisplayString","_hoisted_4","_hoisted_5","_hoisted_6","type","multiple","accept","handleFileUpload","_createTextVNode","_hoisted_7","_hoisted_8","gridGap","_hoisted_9","min","max","_hoisted_10","onClick","exportImage","exportedImage","href","download","_hoisted_11","_createCommentVNode","style","_normalizeStyle","gridStyle","ref","gridCells","cell","index","_createBlock","_component_GridCell","image","onUpdateImage","updateCellImage","isLoading","_hoisted_12","$props","src","imageStyle","props","String","emits","data","scale","position","x","y","imageNaturalWidth","imageNaturalHeight","cellWidth","cellHeight","initialScale","computed","transform","this","mounted","$nextTick","initializeImage","$refs","addEventListener","onWheel","beforeUnmount","removeEventListener","watch","newVal","methods","img","Image","onload","width","height","cellRect","getBoundingClientRect","widthScale","heightScale","Math","adjustedWidth","adjustedHeight","initInteract","interact","draggable","modifiers","restrictRect","restriction","endOnly","listeners","move","event","dx","dy","target","gesturable","ds","preventDefault","delta","deltaY","scaleFactor","newScale","minScale","maxScale","aspectRatio","deltaX","__exports__","components","GridCell","uploadedImages","gap","totalCells","Array","from","length","_","files","remainingSlots","alert","forEach","file","reader","FileReader","e","push","result","placeImageInGrid","readAsDataURL","imageData","i","$set","html2canvas","gridContainer","useCORS","then","canvas","toDataURL","catch","render","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","loaded","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","splice","r","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","window","obj","prop","prototype","hasOwnProperty","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}